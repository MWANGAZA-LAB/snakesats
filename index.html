<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SnakeSats - Bitcoin Education Game</title>
    <meta name="description" content="Learn Bitcoin investment best practices through fun snake gameplay. Collect sats, avoid fiat, and master crypto fundamentals!">
    <meta name="keywords" content="Bitcoin, crypto education, snake game, sats, cryptocurrency, investment, blockchain">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mwangaza-lab.github.io/snakesats/">
    <meta property="og:title" content="SnakeSats - Bitcoin Education Game">
    <meta property="og:description" content="Learn Bitcoin investment best practices through fun snake gameplay. Collect sats, avoid fiat, and master crypto fundamentals!">
    <meta property="og:image" content="https://mwangaza-lab.github.io/snakesats/og-image.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mwangaza-lab.github.io/snakesats/">
    <meta property="twitter:title" content="SnakeSats - Bitcoin Education Game">
    <meta property="twitter:description" content="Learn Bitcoin investment best practices through fun snake gameplay. Collect sats, avoid fiat, and master crypto fundamentals!">
    <meta property="twitter:image" content="https://mwangaza-lab.github.io/snakesats/og-image.png">

    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêç</text></svg>">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%230f1419' width='100' height='100'/><text y='75' x='50' text-anchor='middle' font-size='70'>üêç</text></svg>">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SnakeSats">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <!-- Desktop Header -->
        <header class="desktop-header">
            <h1>üêç SnakeSats</h1>
            <p>Learn Bitcoin investment best practices through gameplay!</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Left Panel - Desktop Only -->
            <div class="left-panel desktop-only">
                <div class="control-section active">
                    <button class="section-toggle">
                        <span class="toggle-icon">üéÆ</span>
                        Game Controls
                        <span class="toggle-arrow">‚ñº</span>
                    </button>
                    <div class="section-content">
                        <div class="game-buttons">
                            <button id="startBtn" class="game-btn primary" aria-label="Start new Snake game">Start Game</button>
                            <button id="pauseBtn" class="game-btn secondary" disabled aria-label="Pause game">Pause</button>
                            <button id="restartBtn" class="game-btn secondary" disabled aria-label="Restart game">Restart</button>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <button class="section-toggle">
                        <span class="toggle-icon">üìñ</span>
                        How to Play
                        <span class="toggle-arrow">‚ñ∂</span>
                    </button>
                    <div class="section-content">
                        <div class="game-rules">
                            <p><strong>üêç Snake:</strong> Control the snake to collect sats and grow!</p>
                            <p><strong>üí∞ Sats:</strong> Collect these to earn points and health</p>
                            <p><strong>üí∏ Fiats:</strong> Avoid these - they reduce health</p>
                            <p><strong>‚úÖ Do's:</strong> Collect these for bonus points</p>
                            <p><strong>üéØ Goal:</strong> Reach level 21 with high health!</p>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <button class="section-toggle">
                        <span class="toggle-icon">‚å®Ô∏è</span>
                        Controls
                        <span class="toggle-arrow">‚ñ∂</span>
                    </button>
                    <div class="section-content">
                        <div class="control-info">
                            <p><strong>Arrow Keys:</strong> Move snake</p>
                            <p><strong>WASD:</strong> Alternative movement</p>
                            <p><strong>Space/P:</strong> Pause/Resume</p>
                            <p><strong>Touch:</strong> Swipe to move (mobile)</p>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <button class="section-toggle">
                        <span class="toggle-icon">‚ö°</span>
                        Game Level
                        <span class="toggle-arrow">‚ñ∂</span>
                    </button>
                    <div class="section-content">
                        <div class="difficulty-panel">
                            <h4>Select Difficulty:</h4>
                            <div class="difficulty-options">
                                <button class="difficulty-btn active" data-difficulty="normal">Normal</button>
                                <button class="difficulty-btn" data-difficulty="legendary">Legendary</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <button class="section-toggle">
                        <span class="toggle-icon">üîä</span>
                        Sound Settings
                        <span class="toggle-arrow">‚ñ∂</span>
                    </button>
                    <div class="section-content">
                        <div class="sound-panel">
                            <div class="sound-controls">
                                <button id="soundToggle" class="sound-btn active">
                                    <span class="sound-icon">üîä</span> Sound
                                </button>
                                <button id="musicToggle" class="sound-btn active">
                                    <span class="music-icon">üéµ</span> Music
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="control-section">
                    <button class="section-toggle">
                        <span class="toggle-icon">üéØ</span>
                        Game Elements
                        <span class="toggle-arrow">‚ñ∂</span>
                    </button>
                    <div class="section-content">
                        <div class="element-legend">
                            <div class="element-item">
                                <span class="element-symbol">üêç</span>
                                <span class="element-text">Snake (You)</span>
                            </div>
                            <div class="element-item">
                                <span class="element-symbol">üí∞</span>
                                <span class="element-text">Sats (Points + Health)</span>
                            </div>
                            <div class="element-item">
                                <span class="element-symbol">üí∏</span>
                                <span class="element-text">Fiat (Avoid - Health Loss)</span>
                            </div>
                            <div class="element-item">
                                <span class="element-symbol">‚úÖ</span>
                                <span class="element-text">Do's (Bonus Points)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Center Panel - Game Canvas -->
            <div class="center-panel">
                <!-- Mobile Stats Header -->
                <div class="mobile-stats-header mobile-only">
                    <div class="mobile-stats">
                        <div class="stat-item">
                            <span class="stat-label">Sats</span>
                            <span class="stat-value" id="mobile-score">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Level</span>
                            <span class="stat-value" id="mobile-level">1</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Health</span>
                            <span class="stat-value" id="mobile-health">100</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Best</span>
                            <span class="stat-value" id="mobile-best">0</span>
                        </div>
                    </div>
                </div>

                <div class="game-area" role="application" aria-label="SnakeSats game area">
                    <canvas id="gameCanvas" width="400" height="400" role="img" aria-label="Snake game playing field. Use arrow keys or swipe to move the snake and collect Bitcoin sats.">Your browser does not support HTML5 canvas. Please upgrade to a modern browser.</canvas>
                    <div class="game-message" id="gameMessage" role="status" aria-live="polite"></div>
                </div>
                
                <!-- Mobile Game Controls -->
                <div class="mobile-game-controls mobile-only">
                    <div class="mobile-controls">
                        <button id="mobileStartBtn" class="mobile-btn primary" aria-label="Start new game">Start</button>
                        <button id="mobilePauseBtn" class="mobile-btn secondary" disabled aria-label="Pause game">Pause</button>
                        <button id="mobileRestartBtn" class="mobile-btn secondary" disabled aria-label="Restart game">Restart</button>
                    </div>
                </div>

                <!-- Mobile Bitcoin Tips -->
                <div class="mobile-bitcoin-tips mobile-only">
                    <h3>üí° Bitcoin Tips</h3>
                    <div class="tip-content" id="mobileTipContent">
                        <p>‚ö° Lightning Network enables fast, cheap transactions</p>
                    </div>
                </div>

                <!-- Mobile Info Button -->
                <div class="mobile-info-section mobile-only">
                    <button id="mobileInfoBtn" class="mobile-info-btn">
                        <span class="info-icon">‚ÑπÔ∏è</span>
                        Game Info
                    </button>
                </div>
            </div>

            <!-- Right Panel - Desktop Only -->
            <div class="right-panel desktop-only">
                <div class="info-panel">
                    <h3>Game Stats</h3>
                    <div class="stats-panel">
                        <div class="stat-row">
                            <span class="stat-label">Sats Collected:</span>
                            <span class="stat-value" id="satsCollected">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Snake Length:</span>
                            <span class="stat-value" id="snakeLength">1</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Good Practices:</span>
                            <span class="stat-value" id="goodPractices">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Current Level:</span>
                            <span class="stat-value" id="currentLevel">1</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Difficulty:</span>
                            <span class="stat-value" id="currentDifficulty">Normal</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Speed Level:</span>
                            <span class="stat-value" id="currentSpeed">1/21</span>
                        </div>
                        <div class="stat-row" id="speedCountdownRow" style="display: none;">
                            <span class="stat-label">Speed Change:</span>
                            <span class="stat-value" id="speedCountdown">Ready</span>
                        </div>
                    </div>
                </div>

                <div class="tips-panel">
                    <h3>üí° Bitcoin Tips</h3>
                    <div class="tip-content" id="tipContent">
                        <p>Welcome to SnakeSats! Learn Bitcoin best practices while playing.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile Info Drawer -->
        <div class="mobile-drawer" id="mobileInfoDrawer">
            <div class="drawer-header">
                <h3>Game Information</h3>
                <button class="drawer-close" id="closeInfoBtn">‚úï</button>
            </div>
            <div class="drawer-content">
                <div class="mobile-section">
                    <h4>üéÆ Game Controls</h4>
                    <div class="mobile-control-info">
                        <p><strong>Swipe:</strong> Move snake in any direction</p>
                        <p><strong>Tap:</strong> Pause/Resume game</p>
                        <p><strong>Double Tap:</strong> Restart game</p>
                    </div>
                </div>
                <div class="mobile-section">
                    <h4>üìñ How to Play</h4>
                    <div class="mobile-game-rules">
                        <p><strong>üêç Snake:</strong> Control the snake to collect sats and grow!</p>
                        <p><strong>üí∞ Sats:</strong> Collect these to earn points and health</p>
                        <p><strong>üí∏ Fiats:</strong> Avoid these - they reduce health</p>
                        <p><strong>‚úÖ Do's:</strong> Collect these for bonus points</p>
                        <p><strong>üéØ Goal:</strong> Reach level 21 with high health!</p>
                    </div>
                </div>
                <div class="mobile-section">
                    <h4>‚ö° Difficulty Settings</h4>
                    <div class="mobile-difficulty-options">
                        <button class="mobile-difficulty-btn active" data-difficulty="normal">Normal</button>
                        <button class="mobile-difficulty-btn" data-difficulty="legendary">Legendary</button>
                    </div>
                </div>
                <div class="mobile-section">
                    <h4>üîä Sound Settings</h4>
                    <div class="mobile-sound-controls">
                        <button id="mobileSoundToggle" class="mobile-sound-btn active">
                            <span class="sound-icon">üîä</span> Sound
                        </button>
                        <button id="mobileMusicToggle" class="mobile-sound-btn active">
                            <span class="music-icon">üéµ</span> Music
                        </button>
                    </div>
                </div>
                <div class="mobile-section">
                    <h4>üéØ Game Elements</h4>
                    <div class="mobile-element-legend">
                        <div class="element-item">
                            <span class="element-symbol">üêç</span>
                            <span class="element-text">Snake (You)</span>
                        </div>
                        <div class="element-item">
                            <span class="element-symbol">üí∞</span>
                            <span class="element-text">Sats (Points + Health)</span>
                        </div>
                        <div class="element-item">
                            <span class="element-symbol">üí∏</span>
                            <span class="element-text">Fiat (Avoid - Health Loss)</span>
                        </div>
                        <div class="element-item">
                            <span class="element-symbol">‚úÖ</span>
                            <span class="element-text">Do's (Bonus Points)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Footer -->
        <footer class="game-footer">
            <p>üêç SnakeSats - Learn Bitcoin investment best practices through gameplay!</p>
        </footer>
    </div>

    <!-- PWA Service Worker Registration -->
    <script>
        // Handle GitHub Pages SPA redirect
        (function() {
            var redirect = sessionStorage.redirect;
            delete sessionStorage.redirect;
            if (redirect && redirect != location.href) {
                history.replaceState(null, null, redirect);
            }
        })();
        
        // Register service worker for PWA support
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Use relative path for service worker to work on GitHub Pages
                const swPath = location.hostname === 'localhost' || location.hostname === '127.0.0.1' 
                    ? '/service-worker.js' 
                    : '/snakesats/service-worker.js';
                
                navigator.serviceWorker.register(swPath)
                    .then(registration => {
                        console.log('‚úÖ Service Worker registered:', registration.scope);
                    })
                    .catch(error => {
                        console.log('‚ùå Service Worker registration failed:', error);
                    });
            });
        }
        
        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            console.log('üí° PWA install prompt available');
            // You can show a custom install button here
        });
        
        window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA installed successfully');
            deferredPrompt = null;
        });
    </script>
    
    <!-- Load main game script last -->
    <script src="game.js"></script>
</body>
</html>