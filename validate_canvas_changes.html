<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Size Validation - SnakeSats</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .pass {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .canvas-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .canvas-details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>üß™ Canvas Size Validation Tests</h1>
    
    <div class="test-container">
        <h2>Test Results</h2>
        <div id="testResults"></div>
        <button onclick="runTests()">Run Tests</button>
        <button onclick="clearResults()">Clear Results</button>
    </div>
    
    <div class="test-container">
        <h2>Canvas Information</h2>
        <div class="canvas-info">
            <div class="canvas-details">
                <h3>Current Canvas</h3>
                <div id="currentCanvasInfo">Loading...</div>
            </div>
            <div class="canvas-details">
                <h3>Expected Values</h3>
                <div id="expectedCanvasInfo">
                    <p><strong>Desktop:</strong> 600x600 pixels</p>
                    <p><strong>Mobile:</strong> Responsive (max 500px)</p>
                    <p><strong>Grid Size:</strong> 30x30 (desktop), 20x20 (mobile)</p>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-container">
        <h2>Game Integration</h2>
        <p>This validation page tests the canvas size changes. The main game should be accessible at:</p>
        <a href="index.html" target="_blank">Open Main Game</a>
    </div>

    <script>
        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.textContent = message;
            resultsDiv.appendChild(resultDiv);
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
        }

        function updateCanvasInfo() {
            const canvas = document.getElementById('gameCanvas');
            const infoDiv = document.getElementById('currentCanvasInfo');
            
            if (canvas) {
                infoDiv.innerHTML = `
                    <p><strong>Width:</strong> ${canvas.width}px</p>
                    <p><strong>Height:</strong> ${canvas.height}px</p>
                    <p><strong>CSS Width:</strong> ${canvas.style.width || 'auto'}</p>
                    <p><strong>CSS Height:</strong> ${canvas.style.height || 'auto'}</p>
                    <p><strong>Screen Width:</strong> ${window.innerWidth}px</p>
                    <p><strong>Is Mobile:</strong> ${window.innerWidth <= 768}</p>
                `;
            } else {
                infoDiv.innerHTML = '<p class="fail">Canvas not found</p>';
            }
        }

        function runTests() {
            clearResults();
            addResult('üöÄ Starting Canvas Size Validation Tests...', 'info');
            
            // Test 1: Check if canvas exists
            const canvas = document.getElementById('gameCanvas');
            if (!canvas) {
                addResult('‚ùå FAIL: Canvas element not found', 'fail');
                return;
            }
            addResult('‚úÖ PASS: Canvas element found', 'pass');
            
            // Test 2: Check canvas size
            const isMobile = window.innerWidth <= 768;
            if (isMobile) {
                if (canvas.width <= window.innerWidth && canvas.width >= 200) {
                    addResult('‚úÖ PASS: Mobile canvas size is appropriate', 'pass');
                } else {
                    addResult('‚ùå FAIL: Mobile canvas size is not appropriate', 'fail');
                }
            } else {
                if (canvas.width >= 600 && canvas.height >= 600) {
                    addResult('‚úÖ PASS: Desktop canvas size increased to 600x600', 'pass');
                } else {
                    addResult('‚ùå FAIL: Desktop canvas size not increased properly', 'fail');
                }
            }
            
            // Test 3: Check responsive behavior
            if (canvas.style.maxWidth === '100%' || canvas.style.width === '100%') {
                addResult('‚úÖ PASS: Canvas has responsive styling', 'pass');
            } else {
                addResult('‚ö†Ô∏è WARN: Canvas may not be fully responsive', 'info');
            }
            
            // Test 4: Check aspect ratio
            if (canvas.width === canvas.height) {
                addResult('‚úÖ PASS: Canvas maintains square aspect ratio', 'pass');
            } else {
                addResult('‚ùå FAIL: Canvas is not square', 'fail');
            }
            
            // Test 5: Check game instance
            if (window.gameInstance) {
                addResult('‚úÖ PASS: Game instance is available', 'pass');
                
                // Test grid size
                const gridSize = window.gameInstance.gridSize;
                if (gridSize >= 20) {
                    addResult(`‚úÖ PASS: Grid size is ${gridSize}x${gridSize}`, 'pass');
                } else {
                    addResult('‚ùå FAIL: Grid size is too small', 'fail');
                }
                
                // Test snake position
                const snake = window.gameInstance.snake;
                if (snake && snake.length > 0) {
                    const head = snake[0];
                    if (head.x >= 0 && head.x < gridSize && head.y >= 0 && head.y < gridSize) {
                        addResult(`‚úÖ PASS: Snake properly positioned at (${head.x}, ${head.y})`, 'pass');
                    } else {
                        addResult('‚ùå FAIL: Snake position is invalid', 'fail');
                    }
                } else {
                    addResult('‚ùå FAIL: Snake not initialized', 'fail');
                }
            } else {
                addResult('‚ö†Ô∏è WARN: Game instance not available (may need to load main game)', 'info');
            }
            
            updateCanvasInfo();
            addResult('üéâ Test suite completed!', 'info');
        }

        // Auto-run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                updateCanvasInfo();
                addResult('üìã Ready to run tests. Click "Run Tests" to validate canvas changes.', 'info');
            }, 1000);
        });
    </script>
</body>
</html>
